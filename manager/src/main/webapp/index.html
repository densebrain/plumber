<html ng-app="PlumberManager">
<head>
	<title>Plumber Manager</title>

	<link rel="stylesheet" href="/static/components/bootstrap/dist/css/bootstrap.css" />
	<link rel="stylesheet" href="/static/components/bootstrap/dist/css/bootstrap-theme.css" />
	<link rel="stylesheet/less" type="text/css" href="/static/css/main.less"/>


	<script type="text/javascript" src="/static/components/jquery/dist/jquery.js"></script>
	<script type="text/javascript" src="/static/components/less/dist/less.js"></script>
	<script type="text/javascript" src="/static/components/bootstrap/dist/js/bootstrap.js"></script>
	<script type="text/javascript" src="/static/components/angular/angular.js"></script>
	<script type="text/javascript" src="/static/js/main.js"></script>

</head>
<body>
	<div id="alerts">

	</div>
	<div class="container">
		<div class="row">
			<div class="col-md-12 text-center center-block">
				<img src="/static/img/pipe.png"/>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<div role="tabpanel">

					<!-- Nav tabs -->
					<ul class="nav nav-tabs" role="tablist">
						<li role="presentation" class="active"><a href="#test" aria-controls="test" role="tab" data-toggle="tab">Manual</a></li>
						<li role="presentation"><a href="#workers" aria-controls="workers" role="tab" data-toggle="tab">Workers</a></li>

					</ul>

					<!-- Tab panes -->
					<div class="tab-content">
						<div role="tabpanel" class="tab-pane active" id="test">
							<form>
								<div class="input-group">
									<textarea id="test-job" class="form-control" placeholder="Paste Job JSON Here..."></textarea>
								</div>
								<div class="input-group">
									<button id="test-button" type="button" class="btn btn-primary">Submit Job</button>
								</div>
							</form>
						</div>
						<div role="tabpanel" class="tab-pane" id="workers">
							<div class="container" ng-controller="Workers">

								<div class="row">

									<div class="col-md-3">
										<table class="table table-bordered">
											<thead>
												<tr>
													<th>Worker</th>
												</tr>
											</thead>
											<tbody>
												<tr ng-repeat="item in items">
													<td ng-click="setWorker(item)">
														{{item.name}} ({{item.jobs.length}})<br/>
															({{item.osDetails.type}} {{item.osDetails.name}} {{item.osDetails.version}})

													</td>
												</tr>
											</tbody>
										</table>
									</div>
									<div class="col-md-9" ng-show="worker != null">
										<h3>{{worker.name}}</h3>
										<h4>{{worker.osDetails.name + '-' + worker.osDetails.version}}</h4>

										<div class="job" ng-repeat="job in worker.jobs">
											<div class="container">
												<div class="row">
													<div class="col-md-2">
														ID
													</div>
													<div class="col-md-10">
														{{job.id}}
													</div>
												</div>
												<div class="row">
													<div class="col-md-2">
														Tracking ID
													</div>
													<div class="col-md-10">
														{{job.trackingId}}
													</div>
												</div>
												<div class="row">
													<div class="col-md-2">
														State
													</div>
													<div class="col-md-10">
														{{job.state}}
													</div>
												</div>
												<div class="row" ng-repeat="exec in job.executions">
													<div class="col-md-12">
														<div class="container">
															<div class="row">
																<div class="col-md-2">
																	Execution
																</div>
																<div class="col-md-10">
																	{{exec.createdAt}}
																</div>
															</div>
															<div class="row">
																<div class="col-md-2">
																	State
																</div>
																<div class="col-md-10">
																	{{exec.state}}
																</div>
															</div>
															<div class="row">
																<div class="col-md-2">
																	Output
																</div>
																<div class="col-md-10">
																	{{exec.output}}
																</div>
															</div>
														</div>
													</div>

												</div>
											</div>

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>

</html>

